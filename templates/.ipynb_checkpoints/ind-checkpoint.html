<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4 Quadrants</title>
    <script>
                function fetchFiles() {
            fetch('/list_files')
                .then(response => response.json())
                .then(data => displayFiles(data.files))
                .catch(error => console.error('Error fetching files:', error));
        }

        function displayFiles(files) {
            const fileList = document.getElementById('file-list');
            fileList.innerHTML = '';

            files.forEach(file => {
                const listItem = document.createElement('li');
                listItem.textContent = file.Key;
                fileList.appendChild(listItem);
            });
        }

        document.addEventListener('DOMContentLoaded', fetchFiles);
           AWS.config.update({
  accessKeyId: 'your_access_key_id',
  secretAccessKey: 'your_secret_access_key',
  region: 'your_aws_region'
});
       const s3 = new AWS.S3();
          function setPdfUrl(url) {
            document.querySelector("#pdf-frame").src = url;
        }

        
         window.onload = function() {
           const savedTheme = localStorage.getItem("theme");
           if (savedTheme) {
             document.getElementById("theme").value = savedTheme;
           }
         };
         
              
         setInterval(function() {
           // Code to refresh the log container
           loadLogFile();
         }, 5000);
                 
         function updateTime() {
                     var now = new Date();
                     var time = now.toLocaleTimeString();
                     var date = now.toLocaleDateString();
                     document.getElementById('datetime').innerHTML = time + ' on ' + date;
                 }
                 setInterval(updateTime, 1000); 
            const form = document.getElementById('submit-button');
         form.addEventListener('submit', (event) => {
         event.preventDefault(); // prevent default form submission
         // handle form submission here
         });
         
         // Listen for Enter key press on input field
         const inputField = form.querySelector('input[name="input-field"]');
         inputField.addEventListener('keydown', (event) => {
         if (event.key === 'Enter') {
         event.preventDefault(); // prevent Enter key from creating a new line
         form.submit(); // submit the form
         }
         });
      </script>
<style>
    body {
        margin: 0;
        background-image: url('your-image-url');
        background-size: cover;
        background-repeat: no-repeat;
    }
    .content-wrapper {
         flex: 1;
         position: relative;
         display: flex;
         flex-direction: column;
         align-items: center;
         justify-content: center;
         padding-top: 20px;
         overflow: hidden;
         }
         canvas {
         width: 100vh;
         height: 1400px;
         z-index: -1;
         opacity: 0.15;
         position: absolute;
         top: 50%;
         left: 50%;
         transform: translate(-50%, -50%);
         padding-top: 0px;
         }
    .container {
        display: flex;
        flex-wrap: wrap;
        width: 100vw;
        height: 100vh;
    }
    .quadrant {
        width: 50%;
        height: 50%;
        box-sizing: border-box;
        position: relative;
    }
    .content {
        background-color: rgba(255, 255, 255, 0.7);
        width: 100%;
        height: 100%;
        box-sizing: border-box;
    }
    .list-container, .pdf-container {
        width: 100%;
        height: 100%;
        overflow-y: scroll;
    }
    .list-container {
        background-color: #222;
        color: white;
    }
    a {
        color: white;
        text-decoration: none;
    }
    a:hover {
        color: #aaa;
    }
    
    
    
    
    
</style>
</head>
<body>
     <div class="container">
         <div class="content-wrapper">
            <canvas id="matrixCanvas"></canvas>
    <div class="quadrant">
        <div class="content">
            <h2 id="datetime" style="color: red;"></h2>
            <h1>Knowledge Vortex to your service</h1>
            <h1>Ask Operator a library related question</h1>
            <form action="/ask" method="POST">
            <input type="text" name="question" id="question" required>
            <h2 for="theme">library for:</h2>
            <div class="select-container">
               <select name="theme" id="theme" onchange="saveTheme()">
                  <option value="windows11">Windows11</option>
                  <option value="python3">Python3</option>
                  <option value="labview">LabView</option>
                  <option value="skodasuperb">SkodaSuperb</option>
                  <option value="mazda6">Mazda6</option>
                  <option value="sonya7ii">SonyA7ii</option>
                  <option value="general">ChatGPTdatabase</option>
               </select>
            </div>
            <div class="button-wrapper"><button type="ask" id="submit-button">Ask Operator</button></div>
                </form>
        </div>
    </div>
    <div class="quadrant">
        <div class="content">
            <div id="log-container"></div>
        </div>
    </div>
    <div class="quadrant">
        <div class="list-container">
            <ul>
                {% for file in files %}
                    <li><a href="#" onclick="openPdf('{{ file.PresignedURL }}')">{{ file.Key }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="quadrant">
        <div class="pdf-container" id="pdf-container"></div>
    </div>
</div>
<script>
    window.onload = function() {
            const savedTheme = localStorage.getItem("theme");
            if (savedTheme) {
                document.getElementById("theme").value = savedTheme;
            }
        };
         
              
         setInterval(function() {
           // Code to refresh the log container
           loadLogFile();
         }, 5000);
                 
         function updateTime() {
                     var now = new Date();
                     var time = now.toLocaleTimeString();
                     var date = now.toLocaleDateString();
                     document.getElementById('datetime').innerHTML = time + ' on ' + date;
                 }
                 setInterval(updateTime, 1000); 
            const form = document.getElementById('submit-button');
         form.addEventListener('submit', (event) => {
         event.preventDefault(); // prevent default form submission
         // handle form submission here
         });
         
         // Listen for Enter key press on input field
         const inputField = form.querySelector('input[name="input-field"]');
         inputField.addEventListener('keydown', (event) => {
         if (event.key === 'Enter') {
         event.preventDefault(); // prevent Enter key from creating a new line
         form.submit(); // submit the form
         }
         });
    function openPdf(presignedUrl) {
        document.getElementById('pdf-container').innerHTML = `<embed src="${presignedUrl}" type="application/pdf" width="100%" height="100%">`;
    }
</script>
</body>
</html>
